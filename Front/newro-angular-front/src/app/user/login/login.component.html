<h1 class="title">Connexion</h1>
<form class="my-form" [formGroup]="loginForm" appearance="fill">
  <mat-error *ngIf="badCredentials">
    Nom d'utilisateur ou mot de passe incorrect
  </mat-error>
  <mat-form-field class="my-field" appearance="fill">
    <mat-label>Nom d'utilisateur</mat-label>
    <input matInput formControlName="username" (keyup.enter)="tryLogin()" />
    <mat-hint class="error" *ngIf="!firstAttempt && validateUsername()">
      Veuillez saisir un nom d'utilisateur
    </mat-hint>
  </mat-form-field>

  <mat-form-field class="my-field" appearance="fill">
    <mat-label>Mot de passe</mat-label>
    <input
      matInput
      formControlName="password"
      [type]="hide ? 'password' : 'text'"
      (keyup.enter)="tryLogin()"
    />
    <mat-icon matSuffix (click)="hide = !hide">{{
      hide ? "visibility_off" : "visibility"
    }}</mat-icon>
    <mat-hint class="error" *ngIf="!firstAttempt && validatePassword()">
      Veuillez saisir un mot de passe
    </mat-hint>
  </mat-form-field>

  <button
    mat-button
    [disabled]="!firstAttempt && validateForm()"
    type="button"
    (click)="tryLogin()"
  >
    Se connecter
  </button>
</form>

<div id="goToRegister">
  Vous n'avez pas de compte ? <a href="/inscription">Inscrivez-vous</a>
</div>
