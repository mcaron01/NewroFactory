<h1 class="title">Inscription</h1>
<form class="my-form" [formGroup]="registerForm" appearance="fill">
  <mat-form-field class="my-field" appearance="fill">
    <mat-label>Nom d'utilisateur</mat-label>
    <input matInput formControlName="username" (keyup.enter)="tryRegister()" />
    <mat-hint align="end"> Entre 3 et 25 caractères</mat-hint>
    <mat-hint class="error" *ngIf="!firstAttempt && validateUsername()">
      Nom d'utilisateur incorrect
    </mat-hint>
    <mat-hint class="error" *ngIf="errors != {}">
      {{ errors["username"] }}
    </mat-hint>
  </mat-form-field>

  <mat-form-field class="my-field" appearance="fill">
    <mat-label>Mot de passe</mat-label>
    <input
      matInput
      formControlName="password"
      [type]="hide ? 'password' : 'text'"
      (keyup.enter)="tryRegister()"
    />
    <mat-icon matSuffix (click)="hide = !hide">{{
      hide ? "visibility_off" : "visibility"
    }}</mat-icon>
    <mat-hint align="end"> Entre 3 et 25 caractères</mat-hint>
    <mat-hint class="error" *ngIf="!firstAttempt && validatePassword()"
      >Mot de passe incorrect</mat-hint
    >
  </mat-form-field>

  <mat-form-field class="my-field" appearance="fill">
    <mat-label>Confirmation du mot de passe</mat-label>
    <input
      matInput
      formControlName="passwordConfirmation"
      [type]="hideConfirm ? 'password' : 'text'"
      (keyup.enter)="tryRegister()"
    />
    <mat-icon matSuffix (click)="hideConfirm = !hideConfirm">{{
      hideConfirm ? "visibility_off" : "visibility"
    }}</mat-icon>
    <mat-hint
      class="error"
      *ngIf="!firstAttempt && validatePasswordConfirmation()"
      >Le mot de passe ne correspond pas</mat-hint
    >
  </mat-form-field>

  <button
    mat-button
    [disabled]="!firstAttempt && validateForm()"
    type="button"
    (click)="tryRegister()"
  >
    S'inscrire
  </button>
</form>

<div id="goToLogin">
  Vous avez déjà un compte ? <a href="/connexion">Connectez-vous</a>
</div>
